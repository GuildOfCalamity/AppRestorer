<Window
    x:Class="AppRestorer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrl="clr-namespace:AppRestorer.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:AppRestorer"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="App Restorer"
    Width="950"
    Height="550"
    Activated="Window_Activated"
    AllowsTransparency="True"
    Background="Transparent"
    Closing="Window_Closing"
    Deactivated="Window_Deactivated"
    FontFamily="Aptos"
    Icon="/AppRestorer;component/AppIcon.ico"
    Loaded="Window_Loaded"
    ResizeMode="CanMinimize"
    ShowInTaskbar="True"
    WindowStartupLocation="CenterScreen"
    WindowState="Normal"
    WindowStyle="None"
    mc:Ignorable="d">

    <!--  we'll do this in the code-behind  -->
    <!--
    <Window.DataContext>
        <local:MainViewModel />
    </Window.DataContext>
    -->

    <Border
        MinWidth="350"
        MinHeight="150"
        Margin="10"
        Padding="20"
        Background="{StaticResource ExtraDarkBrush}"
        BorderBrush="{StaticResource NormalBrush}"
        BorderThickness="2"
        CornerRadius="5"
        MouseDown="MainControl_MouseDown">
        <Border.Effect>
            <DropShadowEffect
                BlurRadius="6"
                Direction="310"
                Opacity="0.5"
                ShadowDepth="6"
                Color="{StaticResource BackgroundDark}" />
        </Border.Effect>

        <DockPanel>
            <StackPanel
                MinWidth="850"
                Margin="0"
                VerticalAlignment="Stretch"
                DockPanel.Dock="Top"
                Orientation="Horizontal">
                <!--<Button
                    x:Name="btnSpin"
                    Height="30"
                    Margin="-2,-2,2,0"
                    VerticalAlignment="Top"
                    Click="Spinner_Click"
                    Opacity="0.9"
                    Style="{StaticResource SpinButton}"
                    Visibility="{Binding IsBusy, Mode=OneWay, Converter={StaticResource boolToVisibility}}">
                    <Button.Tag>
                        <ImageSource>/Assets/Spinner5.png</ImageSource>
                    </Button.Tag>
                </Button>-->
                <TextBlock
                    x:Name="tbStatus"
                    MinWidth="800"
                    MinHeight="30"
                    Margin="10,4,5,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    FontSize="18"
                    Foreground="{StaticResource TitleBrush}"
                    Text="{Binding StatusText, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}" />
                <!--
                <ctrl:TrackRing
                    Width="40"
                    Height="40"
                    Margin="20,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="{StaticResource DotsBrush}"
                    IsActive="{Binding IsBusy, Mode=OneWay}" />
                -->
                <ctrl:DotAnimation
                    Width="70"
                    Height="20"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Center"
                    DotDuration="0.6"
                    DotMinimum="0.6"
                    DotOpacity="0.7"
                    DotRadius="10"
                    DotSize="16"
                    DotSpacing="5.5"
                    FillColor="{StaticResource DotsBrush}"
                    IsRunning="{Binding IsBusy, Mode=OneWay, FallbackValue=true}" />
            </StackPanel>

            <Border
                x:Name="Border"
                Margin="10,5,10,0"
                Padding="0"
                Background="Transparent"
                BorderBrush="{StaticResource NormalDarkBrush}"
                BorderThickness="0"
                CornerRadius="3"
                DockPanel.Dock="Top">
                <ListBox
                    x:Name="AppList"
                    MinWidth="680"
                    MinHeight="360"
                    MaxHeight="360"
                    Margin="0"
                    Background="Transparent"
                    BorderThickness="0">
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type local:RestoreItem}">
                            <Border
                                x:Name="Border"
                                Margin="1"
                                Padding="8"
                                BorderBrush="{StaticResource NormalDarkBrush}"
                                BorderThickness="1"
                                CornerRadius="3">
                                <Border.Effect>
                                    <DropShadowEffect
                                        BlurRadius="3"
                                        Direction="310"
                                        Opacity="0.5"
                                        ShadowDepth="3"
                                        Color="{StaticResource BackgroundDark}" />
                                </Border.Effect>
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox
                                        Margin="0"
                                        VerticalAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        Content="{Binding Location}"
                                        FontSize="14"
                                        Foreground="{StaticResource NormalBrush}"
                                        IsChecked="True"
                                        ToolTipService.ToolTip="Application Path" />
                                    <Image
                                        Width="24"
                                        Margin="15,0,0,0"
                                        Cursor="Hand"
                                        MouseDown="Favorite_MouseDown"
                                        RenderOptions.BitmapScalingMode="Fant"
                                        Source="{Binding Favorite, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource boolToImage}}"
                                        ToolTipService.ToolTip="Toggle Favorite" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Border>

            <!--#region [Controls]-->
            <StackPanel
                Margin="10,20,10,-12"
                HorizontalAlignment="Stretch"
                DockPanel.Dock="Bottom"
                Orientation="Horizontal">
                <Button
                    Width="150"
                    Height="44"
                    Margin="4,2"
                    Click="Restore_Click"
                    Content="Restore Selected"
                    FontSize="15"
                    Template="{StaticResource ReformedButton}" />
                <Button
                    Width="150"
                    Height="44"
                    Margin="4,2"
                    Click="Invert_Click"
                    Content="Invert Selections"
                    FontSize="15"
                    Template="{StaticResource ReformedButton}" />
                <Button
                    Width="150"
                    Height="44"
                    Margin="4,2"
                    Click="Minimize_Click"
                    Content="Minimize"
                    FontSize="15"
                    Template="{StaticResource ReformedButton}" />
                <Button
                    x:Name="ButtonBackup"
                    Width="150"
                    Height="44"
                    Margin="4,2"
                    Click="LoadBackup_Click"
                    Content="Load Backup"
                    FontSize="15"
                    Template="{StaticResource ReformedButton}" />
                <Button
                    Width="150"
                    Height="44"
                    Margin="4,2"
                    Click="Close_Click"
                    Content="Close"
                    FontSize="15"
                    Template="{StaticResource ReformedButton}" />
            </StackPanel>
            <!--#endregion-->
        </DockPanel>
    </Border>
</Window>
